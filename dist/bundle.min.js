var Client=function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){"use strict";function n(e){return!!new RegExp("(?:^|s)((https?://)?(?:localhost|[w-]+(?:.[w-]+)+)(:d+)?(/S*)?)").test(e)}function a(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}function l(e){let t=document.getElementsByClassName("trips")[0];e.forEach((function(e){let o=document.createElement("DIV"),a=document.createElement("H3"),r=document.createElement("H3"),i=document.createElement("P"),s=document.createElement("P"),c=document.createElement("P"),d=document.createElement("DIV"),u=document.createElement("BUTTON");d.classList.add("changeBtn"),u.innerText="Remove Trip",u.id=e.id,u.addEventListener("click",(function(){(async function(e){let t="http://localhost:8000/trip";if(!n(t))return void console.log("Invalid url");const o={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e})};try{const e=await fetch(t,o);return await e.json()}catch(e){return e}})(u.id).then((function(e){confirm("Are you sure you want to Delete this trip?")?(l(e),location.reload()):console.log("Thing was not saved to the database."),console.log("DELETED "+JSON.stringify(e))}))})),d.appendChild(u);let p=document.createElement("DIV");p.classList.add("cardgrid");let g=document.createElement("DIV");a.innerHTML=`My trip to ${e.city}, ${e.country}`,a.classList.add("trip_city"),g.appendChild(a),r.innerHTML=`Departing : ${e.tripDate}`,r.classList.add("trip_date_fet"),g.appendChild(r),g.appendChild(d),i.innerHTML=`${e.city}, ${e.country} is ${e.dayasDiff} days away`,i.classList.add("trip_rem_days"),g.appendChild(i),g.classList.add("infopart"),o.classList.add("imagepart"),o.style.backgroundImage=`url(${e.imageURL})`,p.appendChild(o),s.innerHTML=`High - ${e.tripNewWeatherMax}, Low - ${e.tripNewWeatherMin}`,s.classList.add("trip_weather_air"),g.appendChild(s),c.innerHTML=`${e.weatherDescription}`,c.classList.add("trip_general_weather"),g.appendChild(c),p.appendChild(g),t.appendChild(p)}))}function r(e,t){let o=document.getElementById("add_City"),a=document.getElementById("trip_date");if(1===t&&(console.log("Event "+e),document.getElementsByClassName("modal-bg")[0].classList.add("bg-active"),console.log("Button "+o.innerText)),2===t&&(console.log("Close"),document.getElementsByClassName("modal-bg")[0].classList.remove("bg-active")),3===t){let e=-1;console.log("Clicked addd trips");let t=document.getElementById("name"),o=document.getElementById("result");if(console.log("Data "+a.value),""===t.value)console.log("Date is empty"),o.innerText="You have to enter a city",o.style.marginBottom="5px",o.style.color="red";else if(""===a.value)o.innerText="You have to enter the travel date",o.style.marginBottom="5px",o.style.color="red";else{var r=new Date,c=r.getFullYear()+"-"+r.getDate()+"-"+(r.getMonth()+1),d=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear(),u=new Date(a.value);let g=u.getMonth()+1+"/"+u.getDate()+"/"+u.getFullYear();console.log("Entered date "+g),console.log("My date "+d),console.log("Type "+typeof g),console.log("Type 2 "+typeof d);const y=new Date(d),f=new Date(u),m=Math.abs(f-y),h=Math.ceil(m/864e5);console.log(m+" milliseconds"),console.log(h+" days"),e=h,o.innerText="";let w="http://localhost:8000/getAllKeys";if(!n(w))return void console.log("Ivalid url");let v="",E=async function(e){console.log("URL Passed "+e);const t=await fetch(e);try{return await t.json()}catch(e){console.log("error",e)}console.log("data passed "+JSON.stringify(data))}(w);if(a.value<c)return console.log("The date is not proper"),o.innerText="The date is not proper, please choose future dates",o.style.marginBottom="5px",void(o.style.color="orange");E.then((function(a){v=`http://api.geonames.org/searchJSON?q=${t.value}&paris&maxRows=10&username=${a.geo_userName}`,console.log("The data we got "+a.weatherKey),console.log("URL to visi "+v),p(v).then((function(t){if(0===t.totalResultsCount)o.innerText="Could not find the destination, please try something else",o.style.marginBottom="5px",o.style.color="orange";else{const o=t.geonames[0].toponymName,r=t.geonames[0].lat,c=t.geonames[0].lng,d=t.geonames[0].countryName;console.log("City Found "+o),console.log("Country Found "+d),console.log("LAt Found "+r),console.log("Long Found "+c);let u="id"+(new Date).getTime();console.log("UNIQUE IDDD "+u);let p={id:u,tripDate:g,city:o,lat:r,lng:c,country:d,imageKey:a.pixabay_key,weatherKey:a.weather_key,dayasDiff:e};i(o,a.pixabay_key).then((function(e){p.imageURL=e.hits[0].webformatURL})),s(r,c,a.weather_key).then((function(e){p.tripNewWeatherMax=e.data[0].app_max_temp,p.tripNewWeatherMin=e.data[0].app_min_temp,p.weatherDescription=e.data[0].weather.description;let t=async function(e){let t="http://localhost:8000/new_trip";if(!n(t))return void console.log("Ivalid url "+t);const o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};try{const e=await fetch(t,o);return await e.json()}catch(e){return e}}(p);t.then((function(e){console.log("DATA CAME FROM POSTING "+JSON.stringify(e)),l(e)}))})),document.getElementsByClassName("modal-bg")[0].classList.remove("bg-active"),console.log("Objct Location "+JSON.stringify(p))}}))}))}console.log(t.value)}async function p(e){console.log("URL Passed "+e);const t=await fetch(e);try{return await t.json()}catch(e){console.log("error",e)}console.log("data passed "+JSON.stringify(data))}}async function i(e,t){let o=`https://pixabay.com/api/?key=${t}&q=${e}&image_type=photo&pretty=true`;if(!a(o))return void console.log("Ivalid url "+o);console.log("URL Passed "+o);const n=await fetch(o);try{return await n.json()}catch(e){console.log("error",e)}console.log("data passed "+JSON.stringify(data))}async function s(e,t,o){console.log("Lat: "+e),console.log("Long: "+t),console.log("KEEEEEEY "+o);let n=`https://api.weatherbit.io/v2.0/forecast/daily?lat=${e}&lon=${t}&key=${o}`;if(!a(n))return void console.log("Ivalid url "+n);console.log("url   Yemp "+n);const l=await fetch(n);try{return await l.json()}catch(e){console.log("error",e)}console.log("data passed "+JSON.stringify(data))}o.r(t),o.d(t,"showPopup",(function(){return r})),async function(){let e="http://localhost:8000/allData";if(!n(e))return void console.log("Invalid url");const t=await fetch(e);try{return await t.json()}catch(e){console.log("error",e)}console.log("data passed "+JSON.stringify(data))}().then((function(e){l(e)}));o(0),o(1),o(2),o(3)}]);